# MASTER PLAN: Business Analyst v2.0

> –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ UX-–∞—É–¥–∏—Ç–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ AIZDEC
> –í–µ—Ä—Å–∏—è: 1.0 | –î–∞—Ç–∞: 2025-12-30
> –ú–æ–¥–µ–ª—å –∞–Ω–∞–ª–∏–∑–∞: Claude Opus 4.5 (upgrade from Sonnet)

---

## Executive Summary

### –¶–µ–ª–∏ v2.0

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏** ‚Äî Full Analysis –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
2. **–°–¥–µ–ª–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç –ø–æ–Ω—è—Ç–Ω—ã–º** ‚Äî —É–±—Ä–∞—Ç—å IT-–∂–∞—Ä–≥–æ–Ω, –¥–æ–±–∞–≤–∏—Ç—å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
3. **–£–≤–µ–ª–∏—á–∏—Ç—å –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å** ‚Äî –∞–Ω–∏–º–∞—Ü–∏–∏, –ø—Ä–æ–≥—Ä–µ—Å—Å, –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è
4. **–ü–æ–≤—ã—Å–∏—Ç—å —Ü–µ–Ω–Ω–æ—Å—Ç—å** ‚Äî actionable —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, Google Trends, —ç–∫—Å–ø–æ—Ä—Ç
5. **–£–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ AI** ‚Äî Opus 4.5, —É–ª—É—á—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –¶–µ–ª—å v2.0 |
|---------|---------|-----------|
| –ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å UI | 7/10 | 9/10 |
| –ü–æ–ª–Ω–æ—Ç–∞ Full Analysis | 5/10 | 9/10 |
| Time to Value | ~5 –º–∏–Ω | < 3 –º–∏–Ω |
| Completion Rate | ~50% | > 70% |
| Actionability —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π | 6/10 | 9/10 |

### Timeline

```
–°–ø—Ä–∏–Ω—Ç 0 (1-2 –¥–Ω—è):  –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏        [–ë–õ–û–ö–ï–†]
–°–ø—Ä–∏–Ω—Ç 1 (3-4 –¥–Ω—è):  UI Foundation           [HIGH]
–°–ø—Ä–∏–Ω—Ç 2 (3-4 –¥–Ω—è):  UX Improvements         [HIGH]
–°–ø—Ä–∏–Ω—Ç 3 (5-7 –¥–Ω–µ–π): –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª + –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ [MEDIUM]
–°–ø—Ä–∏–Ω—Ç 4 (2-3 –¥–Ω—è):  –ö–∞—á–µ—Å—Ç–≤–æ AI + Opus 4.5  [HIGH]
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ò—Ç–æ–≥–æ: ~15-20 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –£–ª—É—á—à–µ–Ω–∏–π

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     –¢–ï–ö–£–©–ò–ô FLOW                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ   [–§–æ—Ä–º–∞ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ]                                 ‚îÇ
‚îÇ           ‚îÇ                                                 ‚îÇ
‚îÇ           ‚ñº                                                 ‚îÇ
‚îÇ   [–°–ø–∏–Ω–Ω–µ—Ä "–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º..."]                               ‚îÇ
‚îÇ           ‚îÇ                                                 ‚îÇ
‚îÇ           ‚ñº                                                 ‚îÇ
‚îÇ   [–†–µ–∑—É–ª—å—Ç–∞—Ç—ã]                                             ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Business Canvas (—á–∞—Å—Ç–∏—á–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è)              ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Code Analysis (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ Full)  ‚ùå           ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Gap Detection (–Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ clarification) ‚ùå   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ –£—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã (–ù–ï –ü–û–ö–ê–ó–´–í–ê–Æ–¢–°–Ø) ‚ùå              ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –¶–µ–ª–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ v2.0

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      –ù–û–í–´–ô FLOW v2.0                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ   [Onboarding –¥–ª—è –Ω–æ–≤—ã—Ö]                                   ‚îÇ
‚îÇ           ‚îÇ                                                 ‚îÇ
‚îÇ           ‚ñº                                                 ‚îÇ
‚îÇ   [Wizard: –®–∞–≥ 1 ‚Üí 2 ‚Üí 3]                                  ‚îÇ
‚îÇ           ‚îÇ                                                 ‚îÇ
‚îÇ           ‚ñº                                                 ‚îÇ
‚îÇ   [–î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏]                        ‚îÇ
‚îÇ           ‚îÇ                                                 ‚îÇ
‚îÇ           ‚îú‚îÄ‚îÄ Clarification? ‚Üí [–ü–æ–∫–∞–∑–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã] ‚Üí Loop   ‚îÇ
‚îÇ           ‚îÇ                                                 ‚îÇ
‚îÇ           ‚ñº                                                 ‚îÇ
‚îÇ   [Multi-Metric Score + Verdict]                           ‚îÇ
‚îÇ           ‚îÇ                                                 ‚îÇ
‚îÇ           ‚ñº                                                 ‚îÇ
‚îÇ   [–¢–∞–±—ã: –ë–∏–∑–Ω–µ—Å | –ö–æ–¥ | –†–∞–∑—Ä—ã–≤—ã | –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã]             ‚îÇ
‚îÇ           ‚îÇ                                                 ‚îÇ
‚îÇ           ‚ñº                                                 ‚îÇ
‚îÇ   [Actionable Gap Cards —Å –ø–æ—à–∞–≥–æ–≤—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏]         ‚îÇ
‚îÇ           ‚îÇ                                                 ‚îÇ
‚îÇ           ‚ñº                                                 ‚îÇ
‚îÇ   [–ó–∞–¥–∞—á–∏ –Ω–∞ –Ω–µ–¥–µ–ª—é + –≠–∫—Å–ø–æ—Ä—Ç]                             ‚îÇ
‚îÇ           ‚îÇ                                                 ‚îÇ
‚îÇ           ‚ñº                                                 ‚îÇ
‚îÇ   [Follow-up Chat —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º]                            ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –°–ø—Ä–∏–Ω—Ç 0: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ë–∞–≥–∏ [–ë–õ–û–ö–ï–†]

> –ë–µ–∑ —ç—Ç–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø—Ä–æ–¥—É–∫—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å–ª–æ–º–∞–Ω –¥–ª—è Full Analysis

### S0-01: Full Analysis –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã ‚úÖ DONE

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ CRITICAL
**Effort:** 4-6 —á–∞—Å–æ–≤
**Impact:** –ë–ª–æ–∫–∏—Ä—É—é—â–∏–π
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ 2025-12-30

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω `handleFullAnalysisClarification()` –≤ `page.tsx:558-636`
- –¢—Ä–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞: –ø–æ–ª–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, clarification, –æ—à–∏–±–∫–∞
- Partial analysis –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç tech_stack –∏ detected_stage
- –ü–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π re-run –∞–Ω–∞–ª–∏–∑–∞

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü—Ä–∏ Full Analysis, –µ—Å–ª–∏ LLM –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `needs_clarification: true`:

```typescript
// page.tsx:437 - –¢–ï–ö–£–©–ò–ô –ë–ê–ì–û–í–´–ô –ö–û–î
if (businessData.canvas && codeData.analysis) {
  // –≠–¢–û –£–°–õ–û–í–ò–ï –ù–ï –í–´–ü–û–õ–ù–Ø–ï–¢–°–Ø –∫–æ–≥–¥–∞ codeData.analysis = null
  const gapResponse = await fetch('/api/analyze-gaps', ...);
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –¢–û–õ–¨–ö–û Business Canvas
- –í–æ–ø—Ä–æ—Å—ã –æ—Ç LLM –ù–ï –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- Gap Analysis –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

#### –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç—ã (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å)

```
–°—Ü–µ–Ω–∞—Ä–∏–π A: –í–°–Å –£–°–ü–ï–®–ù–û
‚îú‚îÄ‚îÄ Input: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –±–∏–∑–Ω–µ—Å + –∫–æ–¥
‚îú‚îÄ‚îÄ businessData.canvas ‚úÖ
‚îú‚îÄ‚îÄ codeData.analysis ‚úÖ
‚îú‚îÄ‚îÄ gapResult ‚úÖ
‚îî‚îÄ‚îÄ Output: Canvas + Code + Gaps + Tasks

–°—Ü–µ–Ω–∞—Ä–∏–π B: –¢–†–ï–ë–£–ï–¢–°–Ø –£–¢–û–ß–ù–ï–ù–ò–ï (–¢–ï–ö–£–©–ò–ô –ë–ê–ì)
‚îú‚îÄ‚îÄ Input: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –±–∏–∑–Ω–µ—Å + –∫–æ–¥ (—Ñ–∏—Ç–Ω–µ—Å + shadcn/ui)
‚îú‚îÄ‚îÄ businessData.canvas ‚úÖ
‚îú‚îÄ‚îÄ codeData.needs_clarification = true
‚îú‚îÄ‚îÄ codeData.questions = [{...}, {...}]
‚îú‚îÄ‚îÄ codeData.analysis = null
‚îú‚îÄ‚îÄ gapResult = –ù–ï –í–´–ó–´–í–ê–õ–°–Ø!
‚îî‚îÄ‚îÄ Output: Canvas + [‚ö†Ô∏è –ü–û–ö–ê–ó–ê–¢–¨ –í–û–ü–†–û–°–´] + –∫–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"

–°—Ü–µ–Ω–∞—Ä–∏–π C: –û–®–ò–ë–ö–ê
‚îú‚îÄ‚îÄ Input: –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ businessData.success = false OR codeData.success = false
‚îî‚îÄ‚îÄ Output: –û—à–∏–±–∫–∞ + —á–∞—Å—Ç–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
```

#### –î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–§–∞–π–ª: `src/app/page.tsx`**

1. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É clarification –≤ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (~line 1026):**

```tsx
{analysisMode === 'full' && (
  <div className="results full-results animate-fade-in">

    {/* 1. Alignment Score (–µ—Å–ª–∏ –µ—Å—Ç—å gap result) */}
    {gapResult?.alignment_score && (
      <AlignmentScoreBadge
        score={gapResult.alignment_score}
        verdict={gapResult.verdict}
      />
    )}

    {/* 2. Business Canvas (–≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ—Å–ª–∏ –µ—Å—Ç—å) */}
    {businessResult?.canvas && (
      <ResultsAccordion title="üìä –ö–∞—Ä—Ç–∞ –±–∏–∑–Ω–µ—Å–∞" defaultOpen>
        <BusinessCanvasDisplay result={businessResult} />
      </ResultsAccordion>
    )}

    {/* 3. –ù–û–í–û–ï: –°–µ–∫—Ü–∏—è —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ */}
    {codeResult?.needs_clarification && codeResult?.questions && (
      <div className="clarification-section card animate-fade-in-up">
        <div className="clarification-header">
          <span className="clarification-icon">‚ö†Ô∏è</span>
          <h3>–¢—Ä–µ–±—É–µ—Ç—Å—è —É—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–æ –∫–æ–¥—É</h3>
        </div>

        <p className="clarification-description">
          –°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –æ–ø–∏—Å–∞–Ω–∏–µ–º –±–∏–∑–Ω–µ—Å–∞ –∏ –∫–æ–¥–æ–º.
          –û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –Ω–∏–∂–µ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞:
        </p>

        {/* Partial Analysis (–µ—Å–ª–∏ –µ—Å—Ç—å) */}
        {codeResult.partial_analysis && (
          <div className="partial-analysis">
            <h4>–ß—Ç–æ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å:</h4>
            <ul>
              {codeResult.partial_analysis.technologies && (
                <li>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: {codeResult.partial_analysis.technologies.join(', ')}</li>
              )}
              {codeResult.partial_analysis.stage && (
                <li>–°—Ç–∞–¥–∏—è: {codeResult.partial_analysis.stage}</li>
              )}
            </ul>
          </div>
        )}

        <ClarificationQuestions
          questions={codeResult.questions}
          onSubmit={handleFullAnalysisClarification}
          disabled={loading}
          submitLabel="–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∞–Ω–∞–ª–∏–∑"
        />
      </div>
    )}

    {/* 4. –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ–ª–Ω—ã–π analysis) */}
    {codeResult?.analysis && !codeResult.needs_clarification && (
      <ResultsAccordion title="üíª –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞">
        <AnalysisView analysis={codeResult.analysis} />
      </ResultsAccordion>
    )}

    {/* 5. Gap Detection —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã */}
    {gapResult && (
      <ResultsAccordion title="üéØ –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–∞–∑—Ä—ã–≤—ã" defaultOpen>
        <GapsView result={gapResult} />
      </ResultsAccordion>
    )}

    {/* 6. –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å) */}
    {competitorResult && (
      <ResultsAccordion title="üèÜ –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤">
        <CompetitorAnalysisDisplay result={competitorResult} />
      </ResultsAccordion>
    )}

    {/* 7. –ó–∞–¥–∞—á–∏ –Ω–∞ –Ω–µ–¥–µ–ª—é */}
    {(gapResult?.tasks?.length > 0 || codeResult?.tasks?.length > 0) && (
      <WeeklyTasksList
        tasks={[...(gapResult?.tasks || []), ...(codeResult?.tasks || [])]}
      />
    )}

    {/* 8. –î–µ–π—Å—Ç–≤–∏—è */}
    <ResultsActions
      onExport={handleExport}
      onChat={() => setShowChat(true)}
      results={{ businessResult, codeResult, gapResult, competitorResult }}
    />
  </div>
)}
```

2. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —É—Ç–æ—á–Ω–µ–Ω–∏—è:**

```tsx
// page.tsx - –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
const handleFullAnalysisClarification = async (answers: Record<string, string>) => {
  setLoading(true);
  setProgress({ step: '–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞...', percent: 50 });

  try {
    // 1. –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã –∫ –æ–ø–∏—Å–∞–Ω–∏—é
    const answersText = Object.entries(answers)
      .map(([questionId, answer]) => {
        const question = codeResult?.questions?.find(q => q.id === questionId);
        return `\n\n[–£—Ç–æ—á–Ω–µ–Ω–∏–µ –∫ "${question?.question || questionId}"]: ${answer}`;
      })
      .join('');

    const updatedDescription = description + answersText;
    setDescription(updatedDescription);

    // 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ —Å –æ—Ç–≤–µ—Ç–∞–º–∏
    setProgress({ step: '–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–æ–¥ —Å —É—á—ë—Ç–æ–º —É—Ç–æ—á–Ω–µ–Ω–∏–π...', percent: 60 });

    const codeResponse = await fetch('/api/analyze', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        repo_url: repoUrl,
        files: uploadedFiles,
        project_description: updatedDescription,
        github_token: githubToken,
      }),
    });

    if (!codeResponse.ok) {
      throw new Error(`Code analysis failed: ${codeResponse.status}`);
    }

    const newCodeData = await codeResponse.json();
    setPersistedResult(newCodeData);

    // 3. –ï—Å–ª–∏ —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å analysis –ò –µ—Å—Ç—å canvas ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å gap detection
    if (newCodeData.analysis && businessResult?.canvas) {
      setProgress({ step: '–ò—â–µ–º —Ä–∞–∑—Ä—ã–≤—ã –º–µ–∂–¥—É –±–∏–∑–Ω–µ—Å–æ–º –∏ –∫–æ–¥–æ–º...', percent: 80 });

      const gapResponse = await fetch('/api/analyze-gaps', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          canvas: businessResult.canvas,
          code_analysis: newCodeData.analysis,
          business_stage: businessResult.stage,
        }),
      });

      if (gapResponse.ok) {
        const gapData = await gapResponse.json();
        setGapResult(gapData);
      }
    } else if (newCodeData.needs_clarification) {
      // –í—Å—ë –µ—â—ë —Ç—Ä–µ–±—É—é—Ç—Å—è —É—Ç–æ—á–Ω–µ–Ω–∏—è ‚Äî –ø–æ–∫–∞–∂–µ–º –Ω–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã
      console.log('Still needs clarification after answers');
    }

    setProgress({ step: '–ì–æ—Ç–æ–≤–æ!', percent: 100 });

  } catch (error) {
    console.error('Clarification handling error:', error);
    setErrorMessage('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–∏ –∞–Ω–∞–ª–∏–∑–∞');
  } finally {
    setLoading(false);
  }
};
```

3. **–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:**

```tsx
// –í –Ω–∞—á–∞–ª–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
interface ProgressState {
  step: string;
  percent: number;
}

const [progress, setProgress] = useState<ProgressState | null>(null);
```

#### –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

| –§–∞–π–ª | –î–µ–π—Å—Ç–≤–∏–µ | –°—Ç—Ä–æ–∫–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|--------|----------|
| `src/app/page.tsx` | MODIFY | ~437 | –£–±—Ä–∞—Ç—å strict —É—Å–ª–æ–≤–∏–µ –¥–ª—è gap analysis |
| `src/app/page.tsx` | MODIFY | ~1026-1100 | –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä clarification —Å–µ–∫—Ü–∏–∏ |
| `src/app/page.tsx` | ADD | –ø–æ—Å–ª–µ ~500 | –î–æ–±–∞–≤–∏—Ç—å `handleFullAnalysisClarification` |
| `src/components/analysis/AlignmentScoreBadge.tsx` | CREATE | - | –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç |
| `src/components/results/WeeklyTasksList.tsx` | CREATE | - | –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç |
| `src/components/results/ResultsActions.tsx` | CREATE | - | –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç |

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –°—Ü–µ–Ω–∞—Ä–∏–π A: –°–≤–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π + —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ ‚Üí –ø–æ–ª–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- [ ] –°—Ü–µ–Ω–∞—Ä–∏–π B: shadcn/ui + "—Ñ–∏—Ç–Ω–µ—Å-–±–∏–∑–Ω–µ—Å" ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã
- [ ] –°—Ü–µ–Ω–∞—Ä–∏–π B2: –ü–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã ‚Üí gap analysis –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- [ ] –°—Ü–µ–Ω–∞—Ä–∏–π C: –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π URL ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞
- [ ] –í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∏–¥–Ω—ã (Canvas, Code, Gaps, Tasks)
- [ ] –¢–∞–±—ã –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### S0-02: –ù–µ–æ—á–µ–≤–∏–¥–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã ‚úÖ DONE

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ HIGH
**Effort:** 2-3 —á–∞—Å–∞
**Impact:** –í—ã—Å–æ–∫–∏–π (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥—É–º–∞–µ—Ç —á—Ç–æ —Å–µ—Ä–≤–∏—Å —Å–ª–æ–º–∞–Ω)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ 2025-12-30

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω `getValidationErrors()` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø–∏—Å–∫–∞ –æ—à–∏–±–æ–∫
- –û—à–∏–±–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–¥ –∫–Ω–æ–ø–∫–æ–π –∫–æ–≥–¥–∞ –æ–Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á—ë—Ç –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è
- –°—Ç–∏–ª–∏ `.validation-errors`, `.validation-list` –≤ `page.tsx`

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

```typescript
// page.tsx:571-582 - –¢–ï–ö–£–©–ê–Ø –í–ê–õ–ò–î–ê–¶–ò–Ø
const canSubmit =
  analysisMode === 'full'
    ? businessInput.description.length >= 50 &&
      (repoUrl || uploadedFiles.length > 0) &&
      description.trim()  // <-- –≠–¢–û –ü–û–õ–ï –ù–ï –ü–û–ú–ï–ß–ï–ù–û –ö–ê–ö –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï!
    : ...
```

**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
- –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø—É—Å—Ç–∏—Ç—å" –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
- –ù–ï–¢ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø–æ—á–µ–º—É
- –î—É–º–∞–µ—Ç —á—Ç–æ —Å–µ—Ä–≤–∏—Å —Å–ª–æ–º–∞–Ω

#### –î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

1. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç ValidatedInput —Å –≤–∏–∑—É–∞–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é:**

```tsx
// src/components/forms/ValidatedInput.tsx
'use client';

import { ReactNode, useState } from 'react';

interface ValidationRule {
  validate: (value: string) => boolean;
  message: string;
}

interface ValidatedInputProps {
  label: string;
  value: string;
  onChange: (value: string) => void;
  required?: boolean;
  minLength?: number;
  maxLength?: number;
  placeholder?: string;
  hint?: string;
  multiline?: boolean;
  rows?: number;
  className?: string;
  customValidation?: ValidationRule[];
  showCharCount?: boolean;
  validateOnBlur?: boolean;
}

export function ValidatedInput({
  label,
  value,
  onChange,
  required = false,
  minLength,
  maxLength,
  placeholder,
  hint,
  multiline = false,
  rows = 3,
  className = '',
  customValidation = [],
  showCharCount = false,
  validateOnBlur = true,
}: ValidatedInputProps) {
  const [touched, setTouched] = useState(false);
  const [focused, setFocused] = useState(false);

  // –í–∞–ª–∏–¥–∞—Ü–∏—è
  const errors: string[] = [];

  if (required && !value.trim()) {
    errors.push('–≠—Ç–æ –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è');
  }

  if (minLength && value.length > 0 && value.length < minLength) {
    errors.push(`–ú–∏–Ω–∏–º—É–º ${minLength} —Å–∏–º–≤–æ–ª–æ–≤ (—Å–µ–π—á–∞—Å ${value.length})`);
  }

  if (maxLength && value.length > maxLength) {
    errors.push(`–ú–∞–∫—Å–∏–º—É–º ${maxLength} —Å–∏–º–≤–æ–ª–æ–≤`);
  }

  customValidation.forEach(rule => {
    if (!rule.validate(value)) {
      errors.push(rule.message);
    }
  });

  const hasErrors = errors.length > 0;
  const showErrors = touched && !focused && hasErrors;

  const InputComponent = multiline ? 'textarea' : 'input';

  return (
    <div className={`validated-input ${className} ${showErrors ? 'has-error' : ''}`}>
      <label className="input-label">
        {label}
        {required && <span className="required-mark">*</span>}
      </label>

      <InputComponent
        value={value}
        onChange={(e) => onChange(e.target.value)}
        onFocus={() => setFocused(true)}
        onBlur={() => {
          setFocused(false);
          if (validateOnBlur) setTouched(true);
        }}
        placeholder={placeholder}
        rows={multiline ? rows : undefined}
        className={`input-field ${showErrors ? 'error' : ''}`}
      />

      {/* –ü–æ–¥—Å–∫–∞–∑–∫–∞ */}
      {hint && !showErrors && (
        <p className="input-hint">{hint}</p>
      )}

      {/* –û—à–∏–±–∫–∏ */}
      {showErrors && (
        <div className="input-errors">
          {errors.map((error, i) => (
            <p key={i} className="input-error">
              <span className="error-icon">‚ö†Ô∏è</span>
              {error}
            </p>
          ))}
        </div>
      )}

      {/* –°—á—ë—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤ */}
      {showCharCount && (
        <div className="char-count">
          <span className={minLength && value.length < minLength ? 'below-min' : ''}>
            {value.length}
          </span>
          {minLength && <span className="min-chars">/ –º–∏–Ω. {minLength}</span>}
          {maxLength && <span className="max-chars">/ –º–∞–∫—Å. {maxLength}</span>}
        </div>
      )}
    </div>
  );
}
```

2. **CSS —Å—Ç–∏–ª–∏:**

```css
/* globals.css - –¥–æ–±–∞–≤–∏—Ç—å */

/* Validated Input */
.validated-input {
  margin-bottom: 1rem;
}

.input-label {
  display: block;
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 0.5rem;
}

.required-mark {
  color: var(--error-red);
  margin-left: 0.25rem;
}

.input-field {
  width: 100%;
  padding: 0.75rem 1rem;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: 8px;
  color: var(--text-primary);
  font-size: 0.9375rem;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.input-field:focus {
  outline: none;
  border-color: var(--accent-blue);
  box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.15);
}

.input-field.error {
  border-color: var(--error-red);
}

.input-field.error:focus {
  box-shadow: 0 0 0 3px rgba(248, 81, 73, 0.15);
}

.input-hint {
  font-size: 0.8125rem;
  color: var(--text-muted);
  margin-top: 0.5rem;
}

.input-errors {
  margin-top: 0.5rem;
}

.input-error {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  font-size: 0.8125rem;
  color: var(--error-red);
  margin: 0;
}

.error-icon {
  font-size: 0.75rem;
}

.char-count {
  font-size: 0.75rem;
  color: var(--text-muted);
  text-align: right;
  margin-top: 0.25rem;
}

.char-count .below-min {
  color: var(--warning-yellow);
}
```

3. **Tooltip –Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ:**

```tsx
// –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –∑–∞–ø—É—Å–∫–∞ –≤ page.tsx

{/* Submit Button */}
<div className="submit-section">
  <Tooltip
    content={
      !canSubmit ? (
        <div className="submit-requirements">
          <p>–î–ª—è –∑–∞–ø—É—Å–∫–∞ –∞–Ω–∞–ª–∏–∑–∞:</p>
          <ul>
            {analysisMode === 'full' && businessInput.description.length < 50 && (
              <li>‚ùå –û–ø–∏—à–∏—Ç–µ –±–∏–∑–Ω–µ—Å (–º–∏–Ω. 50 —Å–∏–º–≤–æ–ª–æ–≤)</li>
            )}
            {analysisMode === 'full' && !repoUrl && uploadedFiles.length === 0 && (
              <li>‚ùå –£–∫–∞–∂–∏—Ç–µ GitHub URL –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã</li>
            )}
            {analysisMode === 'full' && !description.trim() && (
              <li>‚ùå –û–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç</li>
            )}
          </ul>
        </div>
      ) : null
    }
    disabled={canSubmit}
  >
    <button
      onClick={handleAnalyze}
      disabled={!canSubmit || loading}
      className={`btn-primary btn-analyze ${canSubmit ? '' : 'disabled'}`}
    >
      {loading ? (
        <>
          <span className="spinner" />
          –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º...
        </>
      ) : (
        <>
          üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑
        </>
      )}
    </button>
  </Tooltip>
</div>
```

#### –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

| –§–∞–π–ª | –î–µ–π—Å—Ç–≤–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|----------|
| `src/components/forms/ValidatedInput.tsx` | CREATE | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π |
| `src/app/page.tsx` | MODIFY | –ó–∞–º–µ–Ω–∏—Ç—å inputs –Ω–∞ ValidatedInput |
| `src/app/page.tsx` | MODIFY | –î–æ–±–∞–≤–∏—Ç—å tooltip –Ω–∞ –∫–Ω–æ–ø–∫—É |
| `src/app/globals.css` | MODIFY | –°—Ç–∏–ª–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ |

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø–æ–º–µ—á–µ–Ω—ã –∫—Ä–∞—Å–Ω–æ–π –∑–≤—ë–∑–¥–æ—á–∫–æ–π
- [ ] –ü—Ä–∏ –ø—É—Å—Ç–æ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–º –ø–æ–ª–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ (–ø–æ—Å–ª–µ blur)
- [ ] –°—á—ë—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Hover –Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏—á–∏–Ω—ã
- [ ] –ü–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π –∫–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è

---

## –°–ø—Ä–∏–Ω—Ç 1: UI Foundation [HIGH]

> –í–∏–∑—É–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–µ—Ä–≤–æ–≥–æ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è

### S1-01: Multi-Metric Score –≤–º–µ—Å—Ç–æ Alignment Score

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ HIGH
**Effort:** 4-5 —á–∞—Å–æ–≤
**Impact:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞–µ—Ç –æ—Ü–µ–Ω–∫—É

#### –¢–µ–∫—É—â–µ–µ vs –ù–æ–≤–æ–µ

**–ë—ã–ª–æ:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  [‚≠ï 73]  Alignment Score          ‚îÇ
‚îÇ           ON_TRACK                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–°—Ç–∞–ª–æ:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìä –û—Ü–µ–Ω–∫–∞ –≤–∞—à–µ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                            ‚îÇ
‚îÇ  üíé –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä—ã–Ω–∫—É                                    ‚îÇ
‚îÇ  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  78/100                   ‚îÇ
‚îÇ  –ü—Ä–æ–¥—É–∫—Ç –≥–æ—Ç–æ–≤ –¥–ª—è –ø–µ—Ä–≤—ã—Ö –ø—Ä–æ–¥–∞–∂                          ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ  üî• –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±–∏–∑–Ω–µ—Å-—Ü–µ–ª—è–º                             ‚îÇ
‚îÇ  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë  92/100                   ‚îÇ
‚îÇ  –ö–æ–¥ —Ö–æ—Ä–æ—à–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å                        ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ  üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ                                  ‚îÇ
‚îÇ  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  54/100                   ‚îÇ
‚îÇ  –ï—Å—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥                                    ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ  üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å                                          ‚îÇ
‚îÇ  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë  89/100                   ‚îÇ
‚îÇ  –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –Ω–µ—Ç                              ‚îÇ
‚îÇ                                                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üéØ –û–±—â–∏–π —Å–∫–æ—Ä: 78/100 ‚Äî –ì–û–¢–û–í –ö –†–û–°–¢–£                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç: `src/components/results/MultiMetricScore.tsx`**

```tsx
'use client';

import { useMemo } from 'react';
import { Tooltip } from '../ui/Tooltip';

interface Metric {
  id: string;
  label: string;
  emoji: string;
  value: number;
  description: string;
  color: string;
  tooltip: string;
}

interface MultiMetricScoreProps {
  metrics: {
    marketReadiness: number;
    businessAlignment: number;
    technicalQuality: number;
    security: number;
  };
  overallScore: number;
  verdict: 'ON_TRACK' | 'ITERATE' | 'PIVOT';
}

export function MultiMetricScore({ metrics, overallScore, verdict }: MultiMetricScoreProps) {
  const metricItems: Metric[] = useMemo(() => [
    {
      id: 'market',
      label: '–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä—ã–Ω–∫—É',
      emoji: 'üíé',
      value: metrics.marketReadiness,
      description: getMarketDescription(metrics.marketReadiness),
      color: getMetricColor(metrics.marketReadiness),
      tooltip: '–ù–∞—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–≤—ã–º –ø—Ä–æ–¥–∞–∂–∞–º: –Ω–∞–ª–∏—á–∏–µ –æ–ø–ª–∞—Ç—ã, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞'
    },
    {
      id: 'alignment',
      label: '–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±–∏–∑–Ω–µ—Å-—Ü–µ–ª—è–º',
      emoji: 'üî•',
      value: metrics.businessAlignment,
      description: getAlignmentDescription(metrics.businessAlignment),
      color: getMetricColor(metrics.businessAlignment),
      tooltip: '–ù–∞—Å–∫–æ–ª—å–∫–æ –∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞—è–≤–ª–µ–Ω–Ω–æ–π –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª–∏ –∏ —Ü–µ–ª—è–º'
    },
    {
      id: 'technical',
      label: '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ',
      emoji: 'üõ†Ô∏è',
      value: metrics.technicalQuality,
      description: getTechnicalDescription(metrics.technicalQuality),
      color: getMetricColor(metrics.technicalQuality),
      tooltip: '–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞, —Ç–µ—Å—Ç–æ–≤, CI/CD, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏'
    },
    {
      id: 'security',
      label: '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å',
      emoji: 'üîí',
      value: metrics.security,
      description: getSecurityDescription(metrics.security),
      color: getMetricColor(metrics.security),
      tooltip: '–ù–∞–ª–∏—á–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∑–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π'
    }
  ], [metrics]);

  const verdictText = useMemo(() => {
    switch (verdict) {
      case 'ON_TRACK': return '–ì–û–¢–û–í –ö –†–û–°–¢–£';
      case 'ITERATE': return '–ù–£–ñ–ù–´ –£–õ–£–ß–®–ï–ù–ò–Ø';
      case 'PIVOT': return '–¢–†–ï–ë–£–ï–¢–°–Ø –ü–ï–†–ï–°–ú–û–¢–†';
    }
  }, [verdict]);

  const verdictClass = verdict.toLowerCase().replace('_', '-');

  return (
    <div className="multi-metric-score animate-scale-in">
      <div className="score-header">
        <span className="score-emoji">üìä</span>
        <h3 className="score-title">–û—Ü–µ–Ω–∫–∞ –≤–∞—à–µ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞</h3>
      </div>

      <div className="metrics-grid">
        {metricItems.map((metric, index) => (
          <div
            key={metric.id}
            className="metric-item stagger-item"
            style={{ animationDelay: `${0.1 + index * 0.05}s` }}
          >
            <Tooltip content={metric.tooltip} position="top">
              <div className="metric-header">
                <span className="metric-emoji">{metric.emoji}</span>
                <span className="metric-label">{metric.label}</span>
                <span className="metric-value">{metric.value}/100</span>
              </div>
            </Tooltip>

            <div className="metric-bar-container">
              <div
                className="metric-bar-fill"
                style={{
                  width: `${metric.value}%`,
                  backgroundColor: metric.color,
                  transition: 'width 0.8s ease-out'
                }}
              />
            </div>

            <p className="metric-description">{metric.description}</p>
          </div>
        ))}
      </div>

      <div className={`overall-score verdict-${verdictClass}`}>
        <div className="overall-left">
          <span className="overall-emoji">üéØ</span>
          <span className="overall-label">–û–±—â–∏–π —Å–∫–æ—Ä:</span>
          <span className="overall-value">{overallScore}/100</span>
        </div>
        <div className="overall-verdict">
          {verdictText}
        </div>
      </div>
    </div>
  );
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
function getMetricColor(value: number): string {
  if (value >= 80) return 'var(--accent-green)';
  if (value >= 60) return 'var(--accent-blue)';
  if (value >= 40) return 'var(--warning-yellow)';
  return 'var(--error-red)';
}

function getMarketDescription(value: number): string {
  if (value >= 80) return '–ü—Ä–æ–¥—É–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∞–∫—Ç–∏–≤–Ω—ã–º –ø—Ä–æ–¥–∞–∂–∞–º';
  if (value >= 60) return '–ü–æ—á—Ç–∏ –≥–æ—Ç–æ–≤, –Ω—É–∂–Ω—ã –Ω–µ–±–æ–ª—å—à–∏–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏';
  if (value >= 40) return '–¢—Ä–µ–±—É—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏';
  return '–ú–Ω–æ–≥–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤';
}

function getAlignmentDescription(value: number): string {
  if (value >= 80) return '–ö–æ–¥ —Ö–æ—Ä–æ—à–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å';
  if (value >= 60) return '–ï—Å—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è';
  if (value >= 40) return '–ö–æ–¥ –∏ –±–∏–∑–Ω–µ—Å-—Ü–µ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç';
  return '–°–µ—Ä—å—ë–∑–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –∫–æ–¥–∞ –∏ —Ü–µ–ª–µ–π';
}

function getTechnicalDescription(value: number): string {
  if (value >= 80) return '–û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞';
  if (value >= 60) return '–•–æ—Ä–æ—à–æ, –Ω–æ –µ—Å—Ç—å —á—Ç–æ —É–ª—É—á—à–∏—Ç—å';
  if (value >= 40) return '–ï—Å—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥';
  return '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –∫–æ–¥–µ';
}

function getSecurityDescription(value: number): string {
  if (value >= 80) return '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –Ω–µ—Ç';
  if (value >= 60) return '–ï—Å—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è';
  if (value >= 40) return '–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏';
  return '–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏';
}
```

**–°—Ç–∏–ª–∏: –¥–æ–±–∞–≤–∏—Ç—å –≤ `globals.css`**

```css
/* Multi-Metric Score */
.multi-metric-score {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.score-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
}

.score-emoji {
  font-size: 1.25rem;
}

.score-title {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.metrics-grid {
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
}

.metric-item {
  opacity: 0;
}

.metric-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
  cursor: help;
}

.metric-emoji {
  font-size: 1rem;
}

.metric-label {
  font-size: 0.9375rem;
  font-weight: 500;
  color: var(--text-primary);
  flex: 1;
}

.metric-value {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--text-secondary);
}

.metric-bar-container {
  height: 8px;
  background: var(--bg-tertiary);
  border-radius: 4px;
  overflow: hidden;
}

.metric-bar-fill {
  height: 100%;
  border-radius: 4px;
}

.metric-description {
  font-size: 0.8125rem;
  color: var(--text-muted);
  margin: 0.5rem 0 0;
}

.overall-score {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  margin-top: 1.5rem;
  border-radius: 8px;
  background: var(--bg-tertiary);
}

.overall-left {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.overall-emoji {
  font-size: 1.25rem;
}

.overall-label {
  font-size: 0.9375rem;
  color: var(--text-secondary);
}

.overall-value {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--text-primary);
}

.overall-verdict {
  font-size: 0.875rem;
  font-weight: 600;
  padding: 0.375rem 0.75rem;
  border-radius: 4px;
}

.verdict-on-track .overall-verdict {
  background: rgba(46, 160, 67, 0.15);
  color: var(--accent-green);
}

.verdict-iterate .overall-verdict {
  background: rgba(187, 128, 9, 0.15);
  color: var(--warning-yellow);
}

.verdict-pivot .overall-verdict {
  background: rgba(248, 81, 73, 0.15);
  color: var(--error-red);
}
```

**–†–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫: `src/lib/gaps/scorer.ts`**

```typescript
// –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Ä–∞—Å—á—ë—Ç–∞ multi-metric score
export function calculateMultiMetricScore(
  gaps: Gap[],
  codeAnalysis: CodeAnalysis,
  businessCanvas: BusinessCanvas
): MultiMetricScore {
  // Market Readiness: –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è + –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ + –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
  const marketGaps = gaps.filter(g =>
    ['monetization', 'marketing', 'growth'].includes(g.category)
  );
  const marketReadiness = 100 - calculatePenalty(marketGaps);

  // Business Alignment: –Ω–∞—Å–∫–æ–ª—å–∫–æ –∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç canvas
  const alignmentGaps = gaps.filter(g =>
    g.business_goal && g.current_state
  );
  const businessAlignment = 100 - calculatePenalty(alignmentGaps);

  // Technical Quality: infrastructure + testing + docs
  const techGaps = gaps.filter(g =>
    ['infrastructure', 'testing', 'documentation', 'scalability'].includes(g.category)
  );
  const technicalQuality = 100 - calculatePenalty(techGaps);

  // Security
  const securityGaps = gaps.filter(g => g.category === 'security');
  const security = 100 - calculatePenalty(securityGaps, 1.5); // higher weight

  // Overall = weighted average
  const overall = Math.round(
    (marketReadiness * 0.3) +
    (businessAlignment * 0.25) +
    (technicalQuality * 0.2) +
    (security * 0.25)
  );

  return {
    metrics: {
      marketReadiness: Math.max(0, Math.min(100, marketReadiness)),
      businessAlignment: Math.max(0, Math.min(100, businessAlignment)),
      technicalQuality: Math.max(0, Math.min(100, technicalQuality)),
      security: Math.max(0, Math.min(100, security)),
    },
    overallScore: Math.max(0, Math.min(100, overall)),
    verdict: overall >= 70 ? 'ON_TRACK' : overall >= 40 ? 'ITERATE' : 'PIVOT'
  };
}

function calculatePenalty(gaps: Gap[], multiplier = 1): number {
  return gaps.reduce((penalty, gap) => {
    const basePenalty = gap.type === 'critical' ? 20 : gap.type === 'warning' ? 10 : 5;
    return penalty + (basePenalty * multiplier);
  }, 0);
}
```

#### –§–∞–π–ª—ã

| –§–∞–π–ª | –î–µ–π—Å—Ç–≤–∏–µ |
|------|----------|
| `src/components/results/MultiMetricScore.tsx` | CREATE |
| `src/lib/gaps/scorer.ts` | MODIFY |
| `src/types/gaps.ts` | MODIFY (–¥–æ–±–∞–≤–∏—Ç—å MultiMetricScore type) |
| `src/app/globals.css` | MODIFY |
| `src/app/page.tsx` | MODIFY (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç) |

---

### S1-02: Skeleton Loading

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° MEDIUM
**Effort:** 2-3 —á–∞—Å–∞
**Impact:** –£–ª—É—á—à–µ–Ω–∏–µ perceived performance

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `src/components/ui/Skeleton.tsx`**

```tsx
'use client';

interface SkeletonProps {
  variant?: 'text' | 'circle' | 'rect' | 'card';
  width?: string | number;
  height?: string | number;
  className?: string;
  animation?: 'shimmer' | 'pulse';
}

export function Skeleton({
  variant = 'text',
  width,
  height,
  className = '',
  animation = 'shimmer'
}: SkeletonProps) {
  const variantClass = `skeleton-${variant}`;
  const animationClass = `skeleton-${animation}`;

  return (
    <div
      className={`skeleton ${variantClass} ${animationClass} ${className}`}
      style={{ width, height }}
      aria-hidden="true"
    />
  );
}

// –ü—Ä–µ—Å–µ—Ç—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤
export function SkeletonCard() {
  return (
    <div className="skeleton-card">
      <Skeleton variant="rect" height={120} />
      <div className="skeleton-card-body">
        <Skeleton variant="text" width="60%" />
        <Skeleton variant="text" width="80%" />
        <Skeleton variant="text" width="40%" />
      </div>
    </div>
  );
}

export function SkeletonScore() {
  return (
    <div className="skeleton-score">
      <Skeleton variant="circle" width={80} height={80} />
      <div className="skeleton-score-text">
        <Skeleton variant="text" width={120} />
        <Skeleton variant="text" width={200} />
      </div>
    </div>
  );
}

export function SkeletonAnalysisResults() {
  return (
    <div className="skeleton-results">
      {/* Score skeleton */}
      <div className="skeleton-header">
        <Skeleton variant="rect" height={200} />
      </div>

      {/* Tabs skeleton */}
      <div className="skeleton-tabs">
        <Skeleton variant="rect" width={80} height={32} />
        <Skeleton variant="rect" width={80} height={32} />
        <Skeleton variant="rect" width={80} height={32} />
      </div>

      {/* Content skeleton */}
      <div className="skeleton-content">
        <SkeletonCard />
        <SkeletonCard />
        <SkeletonCard />
      </div>
    </div>
  );
}
```

**CSS:**

```css
/* Skeleton animations */
.skeleton {
  background: var(--bg-tertiary);
  border-radius: 4px;
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    var(--bg-tertiary) 25%,
    var(--border-primary) 50%,
    var(--bg-tertiary) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s infinite;
}

.skeleton-pulse {
  animation: skeleton-pulse 1.5s ease-in-out infinite;
}

.skeleton-text {
  height: 16px;
  margin-bottom: 8px;
}

.skeleton-circle {
  border-radius: 50%;
}

.skeleton-rect {
  border-radius: 8px;
}

.skeleton-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 12px;
  overflow: hidden;
  margin-bottom: 1rem;
}

.skeleton-card-body {
  padding: 1rem;
}

@keyframes skeleton-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

@keyframes skeleton-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
```

---

### S1-03: CSS –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è

**Effort:** 1-2 —á–∞—Å–∞

**–î–æ–±–∞–≤–∏—Ç—å –≤ `globals.css`:**

```css
/* ===== ANIMATIONS ===== */

/* Fade In */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Fade In Up */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Fade In Down */
@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Scale In */
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Slide In Right */
@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Animation Classes */
.animate-fade-in {
  animation: fadeIn 0.3s ease-out forwards;
}

.animate-fade-in-up {
  animation: fadeInUp 0.4s ease-out forwards;
}

.animate-fade-in-down {
  animation: fadeInDown 0.4s ease-out forwards;
}

.animate-scale-in {
  animation: scaleIn 0.3s ease-out forwards;
}

.animate-slide-in-right {
  animation: slideInRight 0.3s ease-out forwards;
}

/* Staggered Animations */
.stagger-item {
  opacity: 0;
  animation: fadeInUp 0.4s ease-out forwards;
}

.stagger-item:nth-child(1) { animation-delay: 0.05s; }
.stagger-item:nth-child(2) { animation-delay: 0.1s; }
.stagger-item:nth-child(3) { animation-delay: 0.15s; }
.stagger-item:nth-child(4) { animation-delay: 0.2s; }
.stagger-item:nth-child(5) { animation-delay: 0.25s; }
.stagger-item:nth-child(6) { animation-delay: 0.3s; }
.stagger-item:nth-child(7) { animation-delay: 0.35s; }
.stagger-item:nth-child(8) { animation-delay: 0.4s; }

/* Hover Transitions */
.card {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Button Transitions */
.btn-primary,
.btn-secondary {
  transition: background-color 0.2s, transform 0.1s, box-shadow 0.2s;
}

.btn-primary:hover:not(:disabled),
.btn-secondary:hover:not(:disabled) {
  transform: translateY(-1px);
}

.btn-primary:active:not(:disabled),
.btn-secondary:active:not(:disabled) {
  transform: translateY(0);
}

/* Progress Bar Animation */
@keyframes progressFill {
  from { width: 0; }
}

.progress-bar-animated .progress-fill {
  animation: progressFill 0.8s ease-out forwards;
}
```

---

### S1-04: –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∞–Ω–∞–ª–∏–∑–∞

**Effort:** 3-4 —á–∞—Å–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `src/components/ui/AnalysisProgress.tsx`**

```tsx
'use client';

import { useEffect, useState } from 'react';

interface ProgressStep {
  id: string;
  label: string;
  status: 'pending' | 'in_progress' | 'completed' | 'error';
  errorMessage?: string;
}

interface AnalysisProgressProps {
  steps: ProgressStep[];
  currentStepIndex: number;
  estimatedTimeRemaining?: number;
  onCancel?: () => void;
}

export function AnalysisProgress({
  steps,
  currentStepIndex,
  estimatedTimeRemaining,
  onCancel
}: AnalysisProgressProps) {
  const [elapsed, setElapsed] = useState(0);

  // Timer
  useEffect(() => {
    const interval = setInterval(() => {
      setElapsed(prev => prev + 1);
    }, 1000);
    return () => clearInterval(interval);
  }, []);

  // Calculate progress percentage
  const completedSteps = steps.filter(s => s.status === 'completed').length;
  const totalSteps = steps.length;
  const progressPercent = Math.round((completedSteps / totalSteps) * 100);

  // Format time
  const formatTime = (seconds: number) => {
    if (seconds < 60) return `${seconds} —Å–µ–∫`;
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins}:${secs.toString().padStart(2, '0')}`;
  };

  return (
    <div className="analysis-progress animate-scale-in">
      <div className="progress-header">
        <div className="progress-title">
          <span className="progress-icon">üî¨</span>
          <h3>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∞—à –ø—Ä–æ–µ–∫—Ç</h3>
        </div>

        {onCancel && (
          <button onClick={onCancel} className="btn-cancel">
            –û—Ç–º–µ–Ω–∏—Ç—å
          </button>
        )}
      </div>

      {/* Progress Bar */}
      <div className="progress-bar-container">
        <div
          className="progress-bar-fill"
          style={{ width: `${progressPercent}%` }}
        />
        <span className="progress-percent">{progressPercent}%</span>
      </div>

      {/* Steps */}
      <div className="progress-steps">
        {steps.map((step, index) => (
          <div
            key={step.id}
            className={`progress-step step-${step.status}`}
          >
            <span className="step-indicator">
              {step.status === 'completed' && '‚úÖ'}
              {step.status === 'in_progress' && <span className="spinner-small" />}
              {step.status === 'error' && '‚ùå'}
              {step.status === 'pending' && '‚óã'}
            </span>
            <span className="step-label">{step.label}</span>
            {step.errorMessage && (
              <span className="step-error">{step.errorMessage}</span>
            )}
          </div>
        ))}
      </div>

      {/* Time Info */}
      <div className="progress-time">
        <span className="time-elapsed">
          –ü—Ä–æ—à–ª–æ: {formatTime(elapsed)}
        </span>
        {estimatedTimeRemaining && (
          <span className="time-remaining">
            –û—Å—Ç–∞–ª–æ—Å—å: ~{formatTime(estimatedTimeRemaining)}
          </span>
        )}
      </div>

      <p className="progress-hint">
        üí° –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 30-60 —Å–µ–∫—É–Ω–¥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
      </p>
    </div>
  );
}

// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —à–∞–≥–æ–≤
export const FULL_ANALYSIS_STEPS: ProgressStep[] = [
  { id: 'business', label: '–ê–Ω–∞–ª–∏–∑ –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª–∏', status: 'pending' },
  { id: 'repo', label: '–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–¥–∞', status: 'pending' },
  { id: 'code', label: '–ê–Ω–∞–ª–∏–∑ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π', status: 'pending' },
  { id: 'gaps', label: '–ü–æ–∏—Å–∫ —Ä–∞–∑—Ä—ã–≤–æ–≤', status: 'pending' },
  { id: 'tasks', label: '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á', status: 'pending' },
  { id: 'report', label: '–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞', status: 'pending' },
];

export const CODE_ANALYSIS_STEPS: ProgressStep[] = [
  { id: 'repo', label: '–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è', status: 'pending' },
  { id: 'structure', label: '–ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã', status: 'pending' },
  { id: 'tech', label: '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π', status: 'pending' },
  { id: 'quality', label: '–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞', status: 'pending' },
  { id: 'tasks', label: '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π', status: 'pending' },
];
```

---

## –°–ø—Ä–∏–Ω—Ç 2: UX Improvements [HIGH]

### S2-01: Wizard Form –≤–º–µ—Å—Ç–æ –¥–ª–∏–Ω–Ω–æ–π —Ñ–æ—Ä–º—ã

**Effort:** 6-8 —á–∞—Å–æ–≤

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Wizard

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                                             ‚îÇ
‚îÇ  –®–∞–≥ 1 –∏–∑ 3                                                ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üìä –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –±–∏–∑–Ω–µ—Å–µ                                   ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ –û–ø–∏—à–∏—Ç–µ —á–µ–º –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –≤–∞—à –±–∏–∑–Ω–µ—Å *                 ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                                     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚îÇ –ú—ã —Å–æ–∑–¥–∞—ë–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è...                     ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚îÇ                                                 ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚îÇ                                                 ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ 45/50 —Å–∏–º–≤–æ–ª–æ–≤ (–º–∏–Ω–∏–º—É–º)                            ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                                     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ üí° –°–æ–≤–µ—Ç: —É–∫–∞–∂–∏—Ç–µ –∫—Ç–æ –∫–ª–∏–µ–Ω—Ç—ã, –∫–∞–∫ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ   ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ                       [‚Üê –ù–∞–∑–∞–¥]  [–î–∞–ª–µ–µ ‚Üí]                 ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `src/components/forms/AnalysisWizard.tsx`**

```tsx
'use client';

import { useState, ReactNode } from 'react';

interface WizardStep {
  id: string;
  title: string;
  description: string;
  icon: string;
  required: boolean;
  component: ReactNode;
  validate: (data: WizardData) => string | null;
}

interface WizardData {
  businessDescription: string;
  repoUrl: string;
  uploadedFiles: File[];
  projectDescription: string;
  competitors: CompetitorInput[];
  githubToken?: string;
}

interface AnalysisWizardProps {
  mode: 'full' | 'code' | 'business';
  onSubmit: (data: WizardData) => void;
  onCancel?: () => void;
  loading?: boolean;
}

export function AnalysisWizard({ mode, onSubmit, onCancel, loading }: AnalysisWizardProps) {
  const [currentStep, setCurrentStep] = useState(0);
  const [data, setData] = useState<WizardData>({
    businessDescription: '',
    repoUrl: '',
    uploadedFiles: [],
    projectDescription: '',
    competitors: [],
  });
  const [errors, setErrors] = useState<Record<string, string>>({});

  // Define steps based on mode
  const steps = getStepsForMode(mode, data, setData);

  const currentStepConfig = steps[currentStep];
  const isFirstStep = currentStep === 0;
  const isLastStep = currentStep === steps.length - 1;

  // Progress percentage
  const progress = ((currentStep + 1) / steps.length) * 100;

  const handleNext = () => {
    // Validate current step
    const error = currentStepConfig.validate(data);
    if (error) {
      setErrors({ [currentStepConfig.id]: error });
      return;
    }

    setErrors({});

    if (isLastStep) {
      onSubmit(data);
    } else {
      setCurrentStep(prev => prev + 1);
    }
  };

  const handleBack = () => {
    if (!isFirstStep) {
      setCurrentStep(prev => prev - 1);
    }
  };

  return (
    <div className="analysis-wizard animate-fade-in">
      {/* Progress */}
      <div className="wizard-progress">
        <div className="progress-text">
          –®–∞–≥ {currentStep + 1} –∏–∑ {steps.length}
        </div>
        <div className="progress-bar">
          <div
            className="progress-fill"
            style={{ width: `${progress}%` }}
          />
        </div>
      </div>

      {/* Step Header */}
      <div className="wizard-header">
        <span className="step-icon">{currentStepConfig.icon}</span>
        <div className="step-info">
          <h2 className="step-title">{currentStepConfig.title}</h2>
          <p className="step-description">{currentStepConfig.description}</p>
        </div>
      </div>

      {/* Step Content */}
      <div className="wizard-content animate-fade-in-up" key={currentStep}>
        {currentStepConfig.component}

        {/* Error */}
        {errors[currentStepConfig.id] && (
          <div className="wizard-error">
            <span className="error-icon">‚ö†Ô∏è</span>
            {errors[currentStepConfig.id]}
          </div>
        )}
      </div>

      {/* Navigation */}
      <div className="wizard-nav">
        {!isFirstStep && (
          <button
            onClick={handleBack}
            className="btn-secondary"
            disabled={loading}
          >
            ‚Üê –ù–∞–∑–∞–¥
          </button>
        )}

        {onCancel && isFirstStep && (
          <button
            onClick={onCancel}
            className="btn-secondary"
            disabled={loading}
          >
            –û—Ç–º–µ–Ω–∞
          </button>
        )}

        <div className="wizard-nav-spacer" />

        <button
          onClick={handleNext}
          className="btn-primary"
          disabled={loading}
        >
          {loading ? (
            <>
              <span className="spinner" />
              –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º...
            </>
          ) : isLastStep ? (
            'üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑'
          ) : (
            '–î–∞–ª–µ–µ ‚Üí'
          )}
        </button>
      </div>
    </div>
  );
}

// Steps configuration
function getStepsForMode(
  mode: string,
  data: WizardData,
  setData: (data: WizardData) => void
): WizardStep[] {
  const businessStep: WizardStep = {
    id: 'business',
    title: '–û –±–∏–∑–Ω–µ—Å–µ',
    description: '–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–µ–º –ø—Ä–æ–¥—É–∫—Ç–µ –∏ –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª–∏',
    icon: 'üìä',
    required: true,
    component: (
      <BusinessStep
        value={data.businessDescription}
        onChange={(value) => setData({ ...data, businessDescription: value })}
      />
    ),
    validate: (data) => {
      if (!data.businessDescription || data.businessDescription.length < 50) {
        return '–û–ø–∏—à–∏—Ç–µ –±–∏–∑–Ω–µ—Å –ø–æ–¥—Ä–æ–±–Ω–µ–µ (–º–∏–Ω–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤)';
      }
      return null;
    }
  };

  const codeStep: WizardStep = {
    id: 'code',
    title: '–ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞',
    description: '–£–∫–∞–∂–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã',
    icon: 'üíª',
    required: true,
    component: (
      <CodeStep
        repoUrl={data.repoUrl}
        files={data.uploadedFiles}
        description={data.projectDescription}
        onRepoUrlChange={(url) => setData({ ...data, repoUrl: url })}
        onFilesChange={(files) => setData({ ...data, uploadedFiles: files })}
        onDescriptionChange={(desc) => setData({ ...data, projectDescription: desc })}
      />
    ),
    validate: (data) => {
      if (!data.repoUrl && data.uploadedFiles.length === 0) {
        return '–£–∫–∞–∂–∏—Ç–µ GitHub URL –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã';
      }
      if (!data.projectDescription.trim()) {
        return '–û–ø–∏—à–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç';
      }
      return null;
    }
  };

  const competitorsStep: WizardStep = {
    id: 'competitors',
    title: '–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã',
    description: '–î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)',
    icon: 'üèÜ',
    required: false,
    component: (
      <CompetitorsStep
        competitors={data.competitors}
        onChange={(comps) => setData({ ...data, competitors: comps })}
      />
    ),
    validate: () => null // Optional step
  };

  switch (mode) {
    case 'full':
      return [businessStep, codeStep, competitorsStep];
    case 'business':
      return [businessStep, competitorsStep];
    case 'code':
      return [codeStep];
    default:
      return [businessStep, codeStep];
  }
}
```

---

### S2-02: Actionable Gap Cards

**Effort:** 4-5 —á–∞—Å–æ–≤

**–ù–æ–≤—ã–π –¥–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–∫–∏ —Ä–∞–∑—Ä—ã–≤–∞:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                                             ‚îÇ
‚îÇ  üí∞ –ú–û–ù–ï–¢–ò–ó–ê–¶–ò–Ø                              üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ   ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚ö†Ô∏è –ù–µ—Ç —Å–∏—Å—Ç–µ–º—ã –æ–ø–ª–∞—Ç—ã                                     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  –í—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞—Ö, –Ω–æ –≤ –∫–æ–¥–µ –Ω–µ—Ç        ‚îÇ
‚îÇ  –ø–ª–∞—Ç—ë–∂–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏. –ë–µ–∑ —ç—Ç–æ–≥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å       ‚îÇ
‚îÇ  –¥–µ–Ω—å–≥–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.                                  ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  üí° –ß—Ç–æ –¥–µ–ª–∞—Ç—å:                                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  1. –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç –≤ Stripe                          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å stripe –∏ @stripe/stripe-js             ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  3. –î–æ–±–∞–≤–∏—Ç—å Checkout Session API                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  4. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Å–ø–µ—Ö–∞/–æ—Ç–º–µ–Ω—ã                    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhooks –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚è±Ô∏è ~4 —á–∞—Å–∞    üìà –í—ã—Å–æ–∫–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –¥–æ—Ö–æ–¥            ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  üîó –†–µ—Å—É—Ä—Å—ã:                                               ‚îÇ
‚îÇ  [üìö Stripe Docs]  [‚ñ∂Ô∏è –í–∏–¥–µ–æ: Stripe + Next.js]            ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  [‚úÖ –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –≤ Trello]                              ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `src/components/results/ActionableGapCard.tsx`**

```tsx
'use client';

import { useState } from 'react';
import { Gap } from '@/types/gaps';

interface ActionableGapCardProps {
  gap: Gap;
  index: number;
  onCreateTask?: (gap: Gap) => void;
}

export function ActionableGapCard({ gap, index, onCreateTask }: ActionableGapCardProps) {
  const [expanded, setExpanded] = useState(index === 0); // First card expanded by default

  const categoryEmoji = getCategoryEmoji(gap.category);
  const categoryLabel = getCategoryLabel(gap.category);
  const severityClass = `severity-${gap.type}`;
  const severityLabel = getSeverityLabel(gap.type);

  return (
    <div className={`actionable-gap-card ${severityClass} stagger-item`}>
      {/* Header */}
      <div
        className="gap-header"
        onClick={() => setExpanded(!expanded)}
        role="button"
        aria-expanded={expanded}
      >
        <div className="gap-header-left">
          <span className="category-emoji">{categoryEmoji}</span>
          <span className="category-label">{categoryLabel}</span>
        </div>

        <div className="gap-header-right">
          <span className={`severity-badge ${severityClass}`}>
            {severityLabel}
          </span>
          <span className="expand-icon">
            {expanded ? '‚ñº' : '‚ñ∂'}
          </span>
        </div>
      </div>

      {/* Problem Summary */}
      <div className="gap-problem">
        <span className="problem-icon">‚ö†Ô∏è</span>
        <span className="problem-text">{gap.problem_summary || gap.current_state}</span>
      </div>

      {/* Expanded Content */}
      {expanded && (
        <div className="gap-details animate-fade-in">
          {/* Why It Matters */}
          {gap.why_matters && (
            <p className="gap-why">{gap.why_matters}</p>
          )}

          {/* Action Steps */}
          {gap.action_steps && gap.action_steps.length > 0 && (
            <div className="gap-actions">
              <div className="actions-header">
                <span className="actions-icon">üí°</span>
                <span className="actions-title">–ß—Ç–æ –¥–µ–ª–∞—Ç—å:</span>
              </div>

              <ol className="actions-list">
                {gap.action_steps.map((step, i) => (
                  <li key={i} className="action-step">{step}</li>
                ))}
              </ol>

              {/* Effort & Impact */}
              <div className="gap-meta">
                {gap.estimated_hours && (
                  <span className="meta-item">
                    ‚è±Ô∏è ~{gap.estimated_hours} {getHoursLabel(gap.estimated_hours)}
                  </span>
                )}
                <span className="meta-item">
                  üìà {getImpactLabel(gap.impact)} –≤–ª–∏—è–Ω–∏–µ
                </span>
              </div>
            </div>
          )}

          {/* Resources */}
          {gap.resources && gap.resources.length > 0 && (
            <div className="gap-resources">
              <span className="resources-label">üîó –†–µ—Å—É—Ä—Å—ã:</span>
              <div className="resources-list">
                {gap.resources.map((resource, i) => (
                  <a
                    key={i}
                    href={resource.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="resource-link"
                  >
                    {getResourceIcon(resource.type)} {resource.title}
                  </a>
                ))}
              </div>
            </div>
          )}

          {/* Create Task Button */}
          {onCreateTask && (
            <button
              className="btn-create-task"
              onClick={() => onCreateTask(gap)}
            >
              ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–¥–∞—á–∏
            </button>
          )}
        </div>
      )}
    </div>
  );
}

// Helper functions
function getCategoryEmoji(category: string): string {
  const emojis: Record<string, string> = {
    monetization: 'üí∞',
    growth: 'üìà',
    security: 'üîí',
    ux: 'üé®',
    infrastructure: '‚öôÔ∏è',
    marketing: 'üì£',
    scalability: 'üöÄ',
    testing: 'üß™',
    documentation: 'üìö',
  };
  return emojis[category] || 'üìã';
}

function getCategoryLabel(category: string): string {
  const labels: Record<string, string> = {
    monetization: '–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è',
    growth: '–†–æ—Å—Ç',
    security: '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å',
    ux: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç',
    infrastructure: '–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞',
    marketing: '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥',
    scalability: '–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å',
    testing: '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ',
    documentation: '–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è',
  };
  return labels[category] || category;
}

function getSeverityLabel(severity: string): string {
  switch (severity) {
    case 'critical': return 'üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ';
    case 'warning': return 'üü° –í–∞–∂–Ω–æ';
    case 'info': return 'üü¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è';
    default: return severity;
  }
}

function getHoursLabel(hours: number): string {
  if (hours === 1) return '—á–∞—Å';
  if (hours >= 2 && hours <= 4) return '—á–∞—Å–∞';
  return '—á–∞—Å–æ–≤';
}

function getImpactLabel(impact: string): string {
  switch (impact) {
    case 'high': return '–í—ã—Å–æ–∫–æ–µ';
    case 'medium': return '–°—Ä–µ–¥–Ω–µ–µ';
    case 'low': return '–ù–∏–∑–∫–æ–µ';
    default: return impact;
  }
}

function getResourceIcon(type: string): string {
  switch (type) {
    case 'docs': return 'üìö';
    case 'video': return '‚ñ∂Ô∏è';
    case 'article': return 'üìÑ';
    case 'tool': return 'üîß';
    default: return 'üîó';
  }
}
```

---

### S2-03: –ó–∞–º–µ–Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∂–∞—Ä–≥–æ–Ω–∞

**Effort:** 2 —á–∞—Å–∞

**–¢–∞–±–ª–∏—Ü–∞ –∑–∞–º–µ–Ω (–ø—Ä–∏–º–µ–Ω–∏—Ç—å –≤–µ–∑–¥–µ –≤ –∫–æ–¥–µ):**

| –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —Ç–µ—Ä–º–∏–Ω | –†—É—Å—Å–∫–∞—è –∑–∞–º–µ–Ω–∞ |
|-------------------|----------------|
| Business Model Canvas | –ö–∞—Ä—Ç–∞ –±–∏–∑–Ω–µ—Å–∞ |
| Gap Detection | –ü–æ–∏—Å–∫ —Ä–∞–∑—Ä—ã–≤–æ–≤ / —Å–ª–∞–±—ã—Ö –º–µ—Å—Ç |
| Repository | –ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞ / —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π GitHub |
| Tech Stack | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ |
| Alignment Score | –û—Ü–µ–Ω–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è |
| ON_TRACK | –ì–æ—Ç–æ–≤ –∫ —Ä–æ—Å—Ç—É |
| ITERATE | –ù—É–∂–Ω—ã —É–ª—É—á—à–µ–Ω–∏—è |
| PIVOT | –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ—Å–º–æ—Ç—Ä |
| Early Traction | üå± –†–∞–Ω–Ω—è—è —Å—Ç–∞–¥–∏—è |
| Growing | üåø –†–æ—Å—Ç |
| Scaling | üå≥ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ |
| Mature | üèõÔ∏è –ó—Ä–µ–ª—ã–π –ø—Ä–æ–¥—É–∫—Ç |
| Critical | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ |
| Warning | üü° –í–∞–∂–Ω–æ |
| Info | üü¢ –ù–∞ –∑–∞–º–µ—Ç–∫—É |

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/app/page.tsx` ‚Äî —Ç–µ–∫—Å—Ç—ã –∫–∞—Ä—Ç–æ—á–µ–∫ —Ä–µ–∂–∏–º–æ–≤
- `src/components/analysis/AnalysisModeSelector.tsx`
- `src/components/results/BusinessCanvasDisplay.tsx`
- `src/components/results/GapsView.tsx`
- `src/components/results/AlignmentScore.tsx`

---

## –°–ø—Ä–∏–Ω—Ç 3: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª + –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ [MEDIUM]

### S3-01: Google Trends –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**Effort:** 8-10 —á–∞—Å–æ–≤

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
User Input (keywords)
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ /api/trends     ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ SerpAPI / DataForSEO
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ TrendsChart.tsx ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ SVG –≥—Ä–∞—Ñ–∏–∫ + related queries
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**API Route: `src/app/api/trends/route.ts`**

```typescript
import { NextResponse } from 'next/server';

interface TrendData {
  keyword: string;
  timeRange: string;
  data: Array<{ date: string; value: number }>;
  relatedQueries: string[];
  growthPercent: number;
}

export async function POST(req: Request) {
  const { keywords } = await req.json();

  if (!keywords || !Array.isArray(keywords)) {
    return NextResponse.json(
      { error: 'Keywords array required' },
      { status: 400 }
    );
  }

  const serpApiKey = process.env.SERPAPI_KEY;
  if (!serpApiKey) {
    return NextResponse.json(
      { error: 'SerpAPI not configured' },
      { status: 500 }
    );
  }

  try {
    const results: TrendData[] = [];

    for (const keyword of keywords.slice(0, 5)) { // Max 5 keywords
      const response = await fetch(
        `https://serpapi.com/search?engine=google_trends&q=${encodeURIComponent(keyword)}&data_type=TIMESERIES&api_key=${serpApiKey}`
      );

      if (!response.ok) continue;

      const data = await response.json();

      const timelineData = data.interest_over_time?.timeline_data || [];
      const values = timelineData.map((item: any) => ({
        date: item.date,
        value: item.values?.[0]?.extracted_value || 0
      }));

      // Calculate growth
      const firstValue = values[0]?.value || 0;
      const lastValue = values[values.length - 1]?.value || 0;
      const growthPercent = firstValue > 0
        ? Math.round(((lastValue - firstValue) / firstValue) * 100)
        : 0;

      results.push({
        keyword,
        timeRange: '12 months',
        data: values,
        relatedQueries: data.related_queries?.rising?.slice(0, 5).map((q: any) => q.query) || [],
        growthPercent
      });
    }

    return NextResponse.json({ trends: results });

  } catch (error) {
    console.error('Trends API error:', error);
    return NextResponse.json(
      { error: 'Failed to fetch trends' },
      { status: 500 }
    );
  }
}
```

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `src/components/results/TrendsChart.tsx`**

```tsx
'use client';

import { useMemo } from 'react';

interface TrendData {
  keyword: string;
  data: Array<{ date: string; value: number }>;
  relatedQueries: string[];
  growthPercent: number;
}

interface TrendsChartProps {
  trends: TrendData[];
}

export function TrendsChart({ trends }: TrendsChartProps) {
  if (trends.length === 0) return null;

  return (
    <div className="trends-section">
      <div className="trends-header">
        <span className="trends-icon">üìà</span>
        <h3 className="trends-title">–†—ã–Ω–æ—á–Ω—ã–π —Å–ø—Ä–æ—Å</h3>
      </div>

      <div className="trends-grid">
        {trends.map((trend, i) => (
          <TrendCard key={i} trend={trend} />
        ))}
      </div>
    </div>
  );
}

function TrendCard({ trend }: { trend: TrendData }) {
  const isGrowing = trend.growthPercent > 0;

  // Generate SVG path
  const pathD = useMemo(() => {
    if (trend.data.length === 0) return '';

    const width = 280;
    const height = 80;
    const padding = 10;

    const maxValue = Math.max(...trend.data.map(d => d.value), 1);
    const points = trend.data.map((d, i) => {
      const x = padding + (i / (trend.data.length - 1)) * (width - 2 * padding);
      const y = height - padding - (d.value / maxValue) * (height - 2 * padding);
      return `${x},${y}`;
    });

    return `M ${points.join(' L ')}`;
  }, [trend.data]);

  return (
    <div className="trend-card">
      <div className="trend-keyword-row">
        <span className="trend-keyword">"{trend.keyword}"</span>
        <span className={`trend-growth ${isGrowing ? 'positive' : 'negative'}`}>
          {isGrowing ? '‚Üë' : '‚Üì'} {Math.abs(trend.growthPercent)}%
        </span>
      </div>

      {/* Mini Chart */}
      <svg viewBox="0 0 300 100" className="trend-graph">
        <path
          d={pathD}
          fill="none"
          stroke={isGrowing ? 'var(--accent-green)' : 'var(--error-red)'}
          strokeWidth="2"
          strokeLinecap="round"
        />
      </svg>

      {/* Related Queries */}
      {trend.relatedQueries.length > 0 && (
        <div className="trend-related">
          <span className="related-label">–ü–æ—Ö–æ–∂–∏–µ –∑–∞–ø—Ä–æ—Å—ã:</span>
          <div className="related-tags">
            {trend.relatedQueries.map((q, i) => (
              <span key={i} className="related-tag">{q}</span>
            ))}
          </div>
        </div>
      )}
    </div>
  );
}
```

---

### S3-02: –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (Markdown + JSON)

**Effort:** 3-4 —á–∞—Å–∞

**–£—Ç–∏–ª–∏—Ç–∞: `src/lib/export/export-results.ts`**

```typescript
import { BusinessAnalysisResult } from '@/types/business';
import { CodeAnalysisResult } from '@/types';
import { GapAnalysisResult } from '@/types/gaps';

interface ExportData {
  businessResult?: BusinessAnalysisResult;
  codeResult?: CodeAnalysisResult;
  gapResult?: GapAnalysisResult;
  exportedAt: string;
}

export function exportToMarkdown(data: ExportData): string {
  const lines: string[] = [];
  const now = new Date().toLocaleDateString('ru-RU');

  lines.push('# –û—Ç—á—ë—Ç –ø–æ –∞–Ω–∞–ª–∏–∑—É –ø—Ä–æ–µ–∫—Ç–∞');
  lines.push(`> –î–∞—Ç–∞: ${now}`);
  lines.push('');

  // Alignment Score
  if (data.gapResult) {
    lines.push('## üìä –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞');
    lines.push('');
    lines.push(`**Alignment Score:** ${data.gapResult.alignment_score}/100`);
    lines.push(`**–í–µ—Ä–¥–∏–∫—Ç:** ${getVerdictLabel(data.gapResult.verdict)}`);
    lines.push('');
  }

  // Business Canvas
  if (data.businessResult?.canvas) {
    lines.push('## üè¢ Business Model Canvas');
    lines.push('');

    const canvas = data.businessResult.canvas;
    lines.push(`### –¶–µ–Ω–Ω–æ—Å—Ç–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ`);
    lines.push(canvas.value_proposition);
    lines.push('');

    lines.push(`### –°–µ–≥–º–µ–Ω—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤`);
    canvas.customer_segments.forEach(s => lines.push(`- ${s}`));
    lines.push('');

    lines.push(`### –ö–∞–Ω–∞–ª—ã`);
    canvas.channels.forEach(c => lines.push(`- ${c}`));
    lines.push('');

    lines.push(`### –ü–æ—Ç–æ–∫–∏ –¥–æ—Ö–æ–¥–∞`);
    canvas.revenue_streams.forEach(r => lines.push(`- ${r}`));
    lines.push('');

    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏
  }

  // Code Analysis
  if (data.codeResult?.analysis) {
    lines.push('## üíª –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞');
    lines.push('');

    const analysis = data.codeResult.analysis;

    lines.push(`### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏`);
    analysis.technologies.forEach(t => lines.push(`- ${t}`));
    lines.push('');

    lines.push(`### –°—Ç–∞–¥–∏—è –ø—Ä–æ–µ–∫—Ç–∞`);
    lines.push(getStageLabel(analysis.stage));
    lines.push('');
  }

  // Gaps
  if (data.gapResult?.gaps) {
    lines.push('## üéØ –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–∞–∑—Ä—ã–≤—ã');
    lines.push('');

    data.gapResult.gaps.forEach((gap, i) => {
      lines.push(`### ${i + 1}. ${getCategoryLabel(gap.category)} (${getSeverityLabel(gap.type)})`);
      lines.push('');
      lines.push(`**–ü—Ä–æ–±–ª–µ–º–∞:** ${gap.current_state}`);
      lines.push('');
      lines.push(`**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** ${gap.recommendation}`);
      lines.push('');
    });
  }

  // Tasks
  const allTasks = [...(data.gapResult?.tasks || []), ...(data.codeResult?.tasks || [])];
  if (allTasks.length > 0) {
    lines.push('## ‚úÖ –ó–∞–¥–∞—á–∏ –Ω–∞ –Ω–µ–¥–µ–ª—é');
    lines.push('');

    allTasks.forEach((task, i) => {
      lines.push(`- [ ] **${task.title}** (${task.priority})`);
      if (task.description) {
        lines.push(`  ${task.description}`);
      }
    });
    lines.push('');
  }

  lines.push('---');
  lines.push('*–û—Ç—á—ë—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω Business Analyst*');

  return lines.join('\n');
}

export function exportToJSON(data: ExportData): string {
  return JSON.stringify({
    ...data,
    exportedAt: new Date().toISOString(),
    version: '2.0'
  }, null, 2);
}

export function downloadFile(content: string, filename: string, type: 'md' | 'json') {
  const mimeType = type === 'json' ? 'application/json' : 'text/markdown';
  const blob = new Blob([content], { type: mimeType });
  const url = URL.createObjectURL(blob);

  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}
```

---

### S3-03: Follow-up Chat –¥–ª—è Full Analysis

**Effort:** 4-5 —á–∞—Å–æ–≤

–†–∞—Å—à–∏—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `/api/chat/stream` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Full Analysis –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

---

## –°–ø—Ä–∏–Ω—Ç 4: –ö–∞—á–µ—Å—Ç–≤–æ AI + Opus 4.5 [HIGH]

### S4-01: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Claude Opus 4.5

**Effort:** 2-3 —á–∞—Å–∞
**Impact:** –ë–æ–ª–µ–µ –≥–ª—É–±–æ–∫–∏–π –∏ —Ç–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è

**–§–∞–π–ª: `src/lib/llm/openrouter.ts`**

```typescript
// –¢–ï–ö–£–©–ê–Ø –ú–û–î–ï–õ–¨
const MODEL_SONNET = 'anthropic/claude-sonnet-4';

// –ù–û–í–ê–Ø –ú–û–î–ï–õ–¨ –î–õ–Ø –ì–õ–£–ë–û–ö–û–ì–û –ê–ù–ê–õ–ò–ó–ê
const MODEL_OPUS = 'anthropic/claude-opus-4';

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á
export const MODEL_CONFIG = {
  // Opus –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
  fullAnalysis: MODEL_OPUS,
  gapDetection: MODEL_OPUS,
  businessCanvas: MODEL_OPUS,

  // Sonnet –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  chat: MODEL_SONNET,
  codeAnalysis: MODEL_SONNET, // –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å Sonnet –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
  clarification: MODEL_SONNET,
};

// –û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤—ã–∑–æ–≤–∞ LLM
export async function callLLM(
  prompt: string,
  systemPrompt: string,
  taskType: keyof typeof MODEL_CONFIG = 'chat'
): Promise<string> {
  const model = MODEL_CONFIG[taskType];

  const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${process.env.OPENROUTER_API_KEY}`,
      'Content-Type': 'application/json',
      'HTTP-Referer': process.env.SITE_URL || 'http://localhost:3000',
    },
    body: JSON.stringify({
      model,
      messages: [
        { role: 'system', content: systemPrompt },
        { role: 'user', content: prompt }
      ],
      temperature: taskType === 'fullAnalysis' ? 0.3 : 0.5,
      max_tokens: taskType === 'fullAnalysis' ? 8000 : 4000,
    }),
  });

  // ... rest of the function
}
```

**–û–±–Ω–æ–≤–∏—Ç—å –≤—ã–∑–æ–≤—ã –≤ API routes:**

```typescript
// src/app/api/analyze-business/route.ts
const response = await callLLM(userPrompt, systemPrompt, 'businessCanvas');

// src/app/api/analyze-gaps/route.ts
const response = await callLLM(userPrompt, systemPrompt, 'gapDetection');

// src/app/api/analyze-full/route.ts
const response = await callLLM(userPrompt, systemPrompt, 'fullAnalysis');
```

---

### S4-02: –£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã

**Effort:** 4-5 —á–∞—Å–æ–≤

#### –ù–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è Gap Detection

**–§–∞–π–ª: `src/lib/gaps/prompts.ts`**

```typescript
export const ENHANCED_GAP_DETECTION_PROMPT = `
–¢—ã ‚Äî –æ–ø—ã—Ç–Ω—ã–π –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å 15+ –ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º –ø–æ–º–æ—â–∏ —Å—Ç–∞—Ä—Ç–∞–ø–∞–º.

## –¢–≤–æ—è –∑–∞–¥–∞—á–∞

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑—Ä—ã–≤—ã –º–µ–∂–¥—É –±–∏–∑–Ω–µ—Å-—Ü–µ–ª—è–º–∏ –∏ —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–æ–¥—É–∫—Ç–∞.
–î–∞—Ç—å –ö–û–ù–ö–†–ï–¢–ù–´–ï –∏ ACTIONABLE —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

### –ë–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å (Business Canvas)
{canvas}

### –°—Ç–∞–¥–∏—è –±–∏–∑–Ω–µ—Å–∞
{stage}

### –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
{codeAnalysis}

## –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

1. **–ú–û–ù–ï–¢–ò–ó–ê–¶–ò–Ø** (monetization)
   - –ï—Å—Ç—å –ª–∏ –ø–ª–∞—Ç—ë–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞?
   - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ –º–æ–¥–µ–ª—å –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞—è–≤–ª–µ–Ω–Ω–æ–π –≤ Canvas?
   - –ï—Å—Ç—å –ª–∏ –ø–æ–¥–ø–∏—Å–∫–∏/—Ä–∞–∑–æ–≤—ã–µ –ø–ª–∞—Ç–µ–∂–∏/freemium?

2. **–†–û–°–¢** (growth)
   - –ï—Å—Ç—å –ª–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (Mixpanel, GA, Amplitude)?
   - –ï—Å—Ç—å –ª–∏ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?
   - –ï—Å—Ç—å –ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è email-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞?
   - –ï—Å—Ç—å –ª–∏ SEO –±–∞–∑–æ–≤–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è?

3. **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨** (security)
   - –ï—Å—Ç—å –ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è?
   - –ó–∞—â–∏—â–µ–Ω—ã –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ?
   - –ï—Å—Ç—å –ª–∏ rate limiting?
   - –ï—Å—Ç—å –ª–∏ HTTPS/SSL?

4. **UX** (ux)
   - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥—É–∫—Ç–∞ –¶–ê?
   - –ï—Å—Ç—å –ª–∏ onboarding?
   - –ï—Å—Ç—å –ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π?

5. **–ò–ù–§–†–ê–°–¢–†–£–ö–¢–£–†–ê** (infrastructure)
   - –ï—Å—Ç—å –ª–∏ CI/CD?
   - –ï—Å—Ç—å –ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥?
   - –ï—Å—Ç—å –ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ?
   - –ì–æ—Ç–æ–≤ –ª–∏ –ø—Ä–æ–¥—É–∫—Ç –∫ –¥–µ–ø–ª–æ—é?

6. **–ú–ê–°–®–¢–ê–ë–ò–†–£–ï–ú–û–°–¢–¨** (scalability)
   - –ï—Å—Ç—å –ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ?
   - –ï—Å—Ç—å –ª–∏ –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π?
   - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞ –∫ —Ä–æ—Å—Ç—É?

## –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

–î–ª—è –ö–ê–ñ–î–û–ì–û –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑—Ä—ã–≤–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å:

\`\`\`json
{
  "gaps": [
    {
      "id": "gap_monetization_1",
      "category": "monetization",
      "type": "critical",
      "problem_summary": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (1 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ)",
      "business_goal": "–ß—Ç–æ –∑–∞—è–≤–ª–µ–Ω–æ –≤ Canvas",
      "current_state": "–ß—Ç–æ –µ—Å—Ç—å —Å–µ–π—á–∞—Å –≤ –∫–æ–¥–µ",
      "why_matters": "–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)",
      "recommendation": "–û–±—â–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è",
      "action_steps": [
        "–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —à–∞–≥ 1",
        "–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —à–∞–≥ 2",
        "–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —à–∞–≥ 3",
        "–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —à–∞–≥ 4",
        "–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —à–∞–≥ 5"
      ],
      "estimated_hours": 4,
      "effort": "medium",
      "impact": "high",
      "resources": [
        {
          "title": "Stripe Documentation",
          "url": "https://stripe.com/docs",
          "type": "docs"
        }
      ]
    }
  ],
  "alignment_score": 65,
  "verdict": "ITERATE",
  "summary": "–ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)",
  "tasks": [
    {
      "id": "task_1",
      "title": "–î–æ–±–∞–≤–∏—Ç—å Stripe Checkout",
      "description": "–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏ –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫",
      "priority": "critical",
      "category": "monetization",
      "estimated_hours": 4
    }
  ]
}
\`\`\`

## –ü—Ä–∞–≤–∏–ª–∞

1. **–ù–µ –ø—Ä–∏–¥—É–º—ã–≤–∞–π —Ä–∞–∑—Ä—ã–≤–æ–≤** ‚Äî –µ—Å–ª–∏ –≤—Å—ë —Ö–æ—Ä–æ—à–æ, —Å–∫–∞–∂–∏ –æ–± —ç—Ç–æ–º
2. **–ë—É–¥—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º** ‚Äî "–î–æ–±–∞–≤–∏—Ç—å Stripe Checkout" –≤–º–µ—Å—Ç–æ "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—é"
3. **–£—á–∏—Ç—ã–≤–∞–π —Å—Ç–∞–¥–∏—é** ‚Äî –¥–ª—è MVP –Ω–µ –Ω—É–∂–Ω–∞ enterprise –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
4. **Action steps –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏—Å–ø–æ–ª–Ω–∏–º—ã–º–∏** ‚Äî –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–Ω—è—Ç—å —á—Ç–æ –¥–µ–ª–∞—Ç—å
5. **Estimated hours —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã** ‚Äî –Ω–µ –∑–∞–Ω–∏–∂–∞–π –∏ –Ω–µ –∑–∞–≤—ã—à–∞–π
6. **Resources –∞–∫—Ç—É–∞–ª—å–Ω—ã** ‚Äî —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## –°—Ç–∞–¥–∏–π–Ω—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

- **–ò–¥–µ—è/MVP:** –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª > –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è > –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- **Early Traction:** –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è > –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ > –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **Growing:** –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å > –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å > UX
- **Scaling:** –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ > –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å > –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
`;
```

---

### S4-03: –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ AI

**Effort:** 3-4 —á–∞—Å–∞

**–§–∞–π–ª: `src/lib/gaps/validator.ts`**

```typescript
import { GapAnalysisResult, Gap } from '@/types/gaps';

interface ValidationResult {
  isValid: boolean;
  errors: string[];
  warnings: string[];
  sanitizedResult: GapAnalysisResult;
}

export function validateGapResult(result: GapAnalysisResult): ValidationResult {
  const errors: string[] = [];
  const warnings: string[] = [];
  let sanitized = { ...result };

  // 1. Validate alignment score
  if (typeof result.alignment_score !== 'number') {
    errors.push('alignment_score must be a number');
    sanitized.alignment_score = 50;
  } else if (result.alignment_score < 0 || result.alignment_score > 100) {
    warnings.push(`alignment_score ${result.alignment_score} out of range, clamping`);
    sanitized.alignment_score = Math.max(0, Math.min(100, result.alignment_score));
  }

  // 2. Validate verdict
  const validVerdicts = ['ON_TRACK', 'ITERATE', 'PIVOT'];
  if (!validVerdicts.includes(result.verdict)) {
    warnings.push(`Invalid verdict "${result.verdict}", inferring from score`);
    sanitized.verdict = inferVerdict(sanitized.alignment_score);
  }

  // 3. Validate gaps
  if (!Array.isArray(result.gaps)) {
    errors.push('gaps must be an array');
    sanitized.gaps = [];
  } else {
    sanitized.gaps = result.gaps
      .filter(gap => validateGap(gap, warnings))
      .map(gap => sanitizeGap(gap));
  }

  // 4. Remove duplicates
  sanitized.gaps = removeDuplicateGaps(sanitized.gaps);

  // 5. Validate tasks
  if (!Array.isArray(result.tasks)) {
    sanitized.tasks = [];
  } else {
    sanitized.tasks = result.tasks.filter(task => {
      if (!task.title || task.title.length < 5) {
        warnings.push('Removed task with invalid title');
        return false;
      }
      return true;
    });
  }

  // 6. Cap critical gaps per category (max 2)
  const criticalCounts: Record<string, number> = {};
  sanitized.gaps = sanitized.gaps.filter(gap => {
    if (gap.type === 'critical') {
      criticalCounts[gap.category] = (criticalCounts[gap.category] || 0) + 1;
      if (criticalCounts[gap.category] > 2) {
        gap.type = 'warning'; // Downgrade
        warnings.push(`Downgraded critical gap in ${gap.category} (max 2 per category)`);
      }
    }
    return true;
  });

  return {
    isValid: errors.length === 0,
    errors,
    warnings,
    sanitizedResult: sanitized
  };
}

function validateGap(gap: Gap, warnings: string[]): boolean {
  if (!gap.category) {
    warnings.push('Gap missing category');
    return false;
  }

  if (!gap.recommendation || gap.recommendation.length < 20) {
    warnings.push(`Gap "${gap.category}" has too short recommendation`);
    return false;
  }

  return true;
}

function sanitizeGap(gap: Gap): Gap {
  return {
    ...gap,
    id: gap.id || `gap_${gap.category}_${Date.now()}`,
    type: gap.type || 'warning',
    effort: gap.effort || 'medium',
    impact: gap.impact || 'medium',
    action_steps: gap.action_steps || [],
    resources: gap.resources || [],
  };
}

function removeDuplicateGaps(gaps: Gap[]): Gap[] {
  const seen = new Set<string>();
  return gaps.filter(gap => {
    const key = `${gap.category}:${gap.problem_summary || gap.current_state}`;
    if (seen.has(key)) return false;
    seen.add(key);
    return true;
  });
}

function inferVerdict(score: number): 'ON_TRACK' | 'ITERATE' | 'PIVOT' {
  if (score >= 70) return 'ON_TRACK';
  if (score >= 40) return 'ITERATE';
  return 'PIVOT';
}
```

---

## –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–¥–∞—á

| Sprint | ID | –ó–∞–¥–∞—á–∞ | Effort | Priority | Status |
|--------|-----|--------|--------|----------|--------|
| **S0** | S0-01 | Full Analysis clarification | 4-6h | üî¥ CRITICAL | ‚úÖ DONE |
| **S0** | S0-02 | Form validation | 2-3h | üî¥ HIGH | ‚úÖ DONE |
| **S1** | S1-01 | Multi-Metric Score | 4-5h | üî¥ HIGH | ‚úÖ DONE |
| **S1** | S1-02 | Skeleton Loading | 2-3h | üü° MEDIUM | ‚úÖ DONE |
| **S1** | S1-03 | CSS Animations | 1-2h | üü° MEDIUM | ‚úÖ DONE |
| **S1** | S1-04 | Analysis Progress | 3-4h | üü° MEDIUM | ‚úÖ DONE |
| **S2** | S2-01 | Wizard Form | 6-8h | üî¥ HIGH | ‚úÖ DONE |
| **S2** | S2-02 | Actionable Gap Cards | 4-5h | üî¥ HIGH | ‚úÖ DONE |
| **S2** | S2-03 | Replace jargon | 2h | üü° MEDIUM | ‚úÖ DONE |
| **S2** | S2-04 | TopNav | 2h | üü° MEDIUM | ‚úÖ DONE |
| **S3** | S3-01 | Google Trends | 8-10h | üü° MEDIUM | ‚úÖ DONE |
| **S3** | S3-02 | Export (MD/JSON) | 3-4h | üü° MEDIUM | ‚úÖ DONE |
| **S3** | S3-03 | Full Analysis Chat | 4-5h | üü° MEDIUM | ‚úÖ DONE |
| **S4** | S4-01 | Migrate to Opus 4.5 | 2-3h | üî¥ HIGH | ‚úÖ DONE |
| **S4** | S4-02 | Enhanced Prompts | 4-5h | üî¥ HIGH | ‚úÖ DONE |
| **S4** | S4-03 | AI Result Validation | 3-4h | üü° MEDIUM | ‚úÖ DONE |
| **S4** | S4-04 | Test Coverage | 4h | üü° MEDIUM | ‚úÖ DONE |

**–û–±—â–∏–π effort: ~55-70 —á–∞—Å–æ–≤ (~15-20 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π)**

---

## –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è

| –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `src/components/analysis/AlignmentScoreBadge.tsx` | –ë–µ–π–¥–∂ —Å–æ —Å–∫–æ—Ä–æ–º |
| `src/components/results/MultiMetricScore.tsx` | 4-–º–µ—Ç—Ä–∏–∫–∏ —Å–∫–æ—Ä |
| `src/components/results/ActionableGapCard.tsx` | –£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ gap |
| `src/components/results/WeeklyTasksList.tsx` | –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –Ω–∞ –Ω–µ–¥–µ–ª—é |
| `src/components/results/ResultsActions.tsx` | –ö–Ω–æ–ø–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏ —á–∞—Ç–∞ |
| `src/components/results/TrendsChart.tsx` | Google Trends –≥—Ä–∞—Ñ–∏–∫ |
| `src/components/forms/ValidatedInput.tsx` | Input —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π |
| `src/components/forms/AnalysisWizard.tsx` | –ü–æ—à–∞–≥–æ–≤–∞—è —Ñ–æ—Ä–º–∞ |
| `src/components/ui/Skeleton.tsx` | Skeleton loading |
| `src/components/ui/AnalysisProgress.tsx` | –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å |
| `src/lib/export/export-results.ts` | –≠–∫—Å–ø–æ—Ä—Ç –≤ MD/JSON |
| `src/lib/gaps/validator.ts` | –í–∞–ª–∏–¥–∞—Ü–∏—è AI –æ—Ç–≤–µ—Ç–æ–≤ |
| `src/app/api/trends/route.ts` | API –¥–ª—è Google Trends |

---

## –§–∞–π–ª—ã –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏

| –ü—É—Ç—å | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `src/app/page.tsx` | Clarification —Å–µ–∫—Ü–∏—è, Wizard –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, progress |
| `src/app/globals.css` | –ê–Ω–∏–º–∞—Ü–∏–∏, —Å—Ç–∏–ª–∏ –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ |
| `src/lib/llm/openrouter.ts` | –ö–æ–Ω—Ñ–∏–≥ –º–æ–¥–µ–ª–µ–π, Opus 4.5 |
| `src/lib/gaps/prompts.ts` | –£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã |
| `src/lib/gaps/scorer.ts` | Multi-metric —Ä–∞—Å—á—ë—Ç |
| `src/types/gaps.ts` | –ù–æ–≤—ã–µ —Ç–∏–ø—ã –¥–ª—è –º–µ—Ç—Ä–∏–∫ –∏ gaps |
| `src/components/results/GapsView.tsx` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ActionableGapCard |

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ v2.0

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ

- [ ] Full Analysis –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –í–°–ï —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (Canvas + Code + Gaps + Tasks)
- [ ] Clarification –≤–æ–ø—Ä–æ—Å—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- [ ] Wizard —Ñ–æ—Ä–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ Markdown –∏ JSON —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Google Trends –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ API key)
- [ ] Opus 4.5 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### UX

- [ ] –ù–µ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –∂–∞—Ä–≥–æ–Ω–∞ –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
- [ ] –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø–æ–º–µ—á–µ–Ω—ã
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏
- [ ] Skeleton loading –≤–º–µ—Å—Ç–æ —Å–ø–∏–Ω–Ω–µ—Ä–æ–≤
- [ ] –ê–Ω–∏–º–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–ª–∞–≤–Ω–æ

### –ö–∞—á–µ—Å—Ç–≤–æ

- [ ] AI —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è
- [ ] –ù–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è gaps
- [ ] Action steps –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏ –∏—Å–ø–æ–ª–Ω–∏–º—ã–µ
- [ ] Estimated hours —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã

---

## –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|---------|-----------|
| Opus 4.5 –¥–æ—Ä–æ–∂–µ | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω—è—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Opus —Ç–æ–ª—å–∫–æ –¥–ª—è critical paths |
| SerpAPI –ª–∏–º–∏—Ç—ã | –°—Ä–µ–¥–Ω—è—è | –ù–∏–∑–∫–∞—è | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, fallback –±–µ–∑ trends |
| Breaking changes –≤ page.tsx | –í—ã—Å–æ–∫–∞—è | –í—ã—Å–æ–∫–∞—è | –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Ç–µ—Å—Ç—ã |
| LLM gallucinates | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω—è—è | –í–∞–ª–∏–¥–∞—Ü–∏—è + fallback |

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω:** 2025-12-30
**–í–µ—Ä—Å–∏—è:** 1.0
**–ê–≤—Ç–æ—Ä:** Claude Opus 4.5

---

*–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ù–∞—á–∞—Ç—å —Å Sprint 0 ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤*
